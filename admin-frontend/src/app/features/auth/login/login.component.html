<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <h2>Giriş Yap</h2>
      <p>Hesabınıza giriş yapın</p>
      <small class="auth-mode-info">{{ authMode }}</small>
    </div>

    <!-- DEFAULT veya HYBRID Mode için Form -->
    <form *ngIf="isDefault || isHybrid" [formGroup]="form" (ngSubmit)="submit()" class="login-form">
      <div class="form-group">
        <label for="email">Email</label>
        <div class="input-wrapper">
          <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
          <input id="email" type="email" formControlName="email" placeholder="mail@example.com"
            [class.error]="form.get('email')?.invalid && form.get('email')?.touched" />
        </div>
      </div>

      <div class="form-group">
        <label for="password">Şifre</label>
        <div class="input-wrapper">
          <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <circle cx="12" cy="16" r="1"></circle>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          <input id="password" type="password" formControlName="password" placeholder="••••••••"
            [class.error]="form.get('password')?.invalid && form.get('password')?.touched" />
        </div>
      </div>

      <button type="submit" class="submit-btn" [disabled]="loading" [class.loading]="loading">
        <span *ngIf="!loading">Giriş Yap</span>
        <div *ngIf="loading" class="spinner"></div>
      </button>

      <!-- Register Link (DEFAULT VE HYBRID modda) -->
      <div *ngIf="isDefault || isHybrid" class="register-link">
        <span>Hesabınız yok mu?</span>
        <a routerLink="/register">Hesap oluştur</a>
      </div>

      <!-- HYBRID modda SSO seçeneği de göster -->
      <div *ngIf="isHybrid" class="or-divider">
        <span>veya</span>
      </div>
    </form>

    <!-- SSO veya HYBRID Mode için SSO Butonu -->
    <div class="sso-login" *ngIf="isSSO || isHybrid">
      <button type="button" class="provider-btn provider--keycloak" (click)="submitSSO()" [disabled]="loading"
        [class.loading]="loading">
        <span class="provider-icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l7 4v6c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-4z"></path>
            <path d="M9 12l2 2 4-4"></path>
          </svg>
        </span>
        <span class="provider-text">Keycloak ile Giriş Yap</span>
        <div *ngIf="loading" class="spinner"></div>
      </button>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="15" y1="9" x2="9" y2="15"></line>
        <line x1="9" y1="9" x2="15" y2="15"></line>
      </svg>
      {{ error }}
    </div>
  </div>
</div>